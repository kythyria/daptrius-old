<nav>
  <ul>
<%
if page.ancestors.length == 1
  %><li class="current root"><%= link_for_page page %></li><%
else
  %><li class="root"><%= link_for_page page.ancestors.first %></li><%
  page.ancestors[1..-2].each do |i|
    %><li class="intermediate"><%= link_for_page i %></li><%
  end
  %><li class="current"><%= link_for_page page %></li><%
  page.children.each do |i|
    %><li class="subpage"><%= link_for_page i%></li><%
  end
end
%>
  </ul>
</nav>